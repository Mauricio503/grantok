jQuery(document).ready(function(e){function i(){var i=(e(window).width()-e(".cd-quick-view").width())/2,t=(e(window).height()-e(".cd-quick-view").height())/2;e(".cd-quick-view").css({top:t,left:i})}function t(i,t){var d,c,l,a,o,n=e(".cd-close").siblings(".cd-slider-wrapper").find(".selected img").attr("src"),r=e(".empty-box").find("img");!e(".cd-quick-view").hasClass("velocity-animating")&&e(".cd-quick-view").hasClass("add-content")?(r.attr("src",n),s(r,i,t,"close")):(c=(d=r).parent(".cd-item"),l=d.offset().top-e(window).scrollTop(),a=d.offset().left,o=d.width(),e("body").removeClass("overlay-layer"),c.removeClass("empty-box"),e(".cd-quick-view").velocity("stop").removeClass("add-content animate-width is-visible").css({top:l,left:a,width:o}))}function s(i,t,s,d){var c=i.parent(".cd-item"),l=i.offset().top-e(window).scrollTop(),a=i.offset().left,o=i.width(),n=i.height(),r=e(window).width(),w=(r-t)/2,v=(e(window).height()-t*n/o)/2,h=.8*r<s?.8*r:s,p=(r-h)/2;"open"==d?(c.addClass("empty-box"),e(".cd-quick-view").css({top:l,left:a,width:o}).velocity({top:v+"px",left:w+"px",width:t+"px"},1e3,[400,20],function(){e(".cd-quick-view").addClass("animate-width").velocity({left:p+"px",width:h+"px"},300,"ease",function(){e(".cd-quick-view").addClass("add-content")})}).addClass("is-visible")):e(".cd-quick-view").removeClass("add-content").velocity({top:v+"px",left:w+"px",width:t+"px"},300,"ease",function(){e("body").removeClass("overlay-layer"),e(".cd-quick-view").removeClass("animate-width").velocity({top:l,left:a,width:o},500,"ease",function(){e(".cd-quick-view").removeClass("is-visible"),c.removeClass("empty-box")})})}e(".cd-trigger").on("click",function(i){var t,d=e(this).parent(".cd-item").children("img"),c=d.attr("src");e("body").addClass("overlay-layer"),s(d,400,900,"open"),t=c,e(".cd-quick-view .cd-slider li").removeClass("selected").find('img[src="'+t+'"]').parent("li").addClass("selected")}),e("body").on("click",function(i){(e(i.target).is(".cd-close")||e(i.target).is("body.overlay-layer"))&&t(400,900)}),e(document).keyup(function(e){"27"==e.which&&t(400,900)}),e(".cd-quick-view").on("click",".cd-slider-navigation a",function(){var i,t,s;i=e(this),t=i.parents(".cd-slider-wrapper").find(".cd-slider"),s=t.children(".selected").removeClass("selected"),i.hasClass("cd-next")?s.is(":last-child")?t.children("li").eq(0).addClass("selected"):s.next().addClass("selected"):s.is(":first-child")?t.children("li").last().addClass("selected"):s.prev().addClass("selected")}),e(window).on("resize",function(){e(".cd-quick-view").hasClass("is-visible")&&window.requestAnimationFrame(i)})});